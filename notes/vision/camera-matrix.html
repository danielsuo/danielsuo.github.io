<!doctype html>
<html>

  <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<title>Daniel Suo | Scientific progress goes 'boink'</title>

<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="/assets/css/pygment_trac.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="shortcut icon" href="/assets/img/profile.jpg" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"> </script>



<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
  });
</script>










<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>


  <body id='Camera Matrix'>

    <div class='wrapper'>

      <header>
    <h1>Daniel Suo</h1>
    <p>Scientific progress goes 'boink'</p>


    <p>
      Ph.D. Candidate<br>
      Princeton University<br>
      Department of Computer Science
    </p>

    <ul>
    	<li><a href="/">home</a></li>
      <!-- <li><a href="https://blog.danielsuo.com">blog</a> -->
      <!-- <li><a href="/projects">projects</a></li> -->
      <li><a href="/notes">notes</a></li>
      <li><a href="https://github.com/danielsuo/cv/raw/master/cv.pdf">cv</a></li>
    </ul>

</header>

      <section>
        <nav class="breadcrumbs bootstrap hidden-sm-down" >
  <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">
    
    
      

      

      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
          <a property="item" typeof="WebPage" href="/"><span property="name">home</span><meta property="position" content="1" /></a>
      </li>
    
      

      

      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
          <a property="item" typeof="WebPage" href="/notes/"><span property="name">notes</span><meta property="position" content="2" /></a>
      </li>
    
      

      

      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
          <a property="item" typeof="WebPage" href="/notes/vision/"><span property="name">Notes on Computer Vision</span><meta property="position" content="3" /></a>
      </li>
    
      

      

      
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem"><span property="name">Camera Matrix</span><meta property="position" content="4" /></li>
        

  </ol>
</nav>


<!-- This is an example of CSS. Maybe you want to implement the css code into your main css file or modify it as you want -->
<style>
nav.breadcrumbs.bootstrap {
  /* from Twitter Bootstrap 4 */
  /* If you already use Twitter, you do not need these css lines above, cause they already in Twitter Bootstrap */
  /* Additions: image integration */
}
nav.breadcrumbs.bootstrap ol {
  margin-left: 0
}
nav.breadcrumbs.bootstrap .breadcrumb {
  font-size: 1rem;
  padding: 0.75rem 1rem;
  margin-bottom: 1rem;
  list-style: none;
  background-color: #f1f2ed;
  border-radius: 0.25rem;
}
nav.breadcrumbs.bootstrap .breadcrumb::after {
  content: "";
  display: table;
  clear: both;
}
nav.breadcrumbs.bootstrap .breadcrumb-item {
  float: left;
}
nav.breadcrumbs.bootstrap .breadcrumb-item + .breadcrumb-item::before {
  display: inline-block;
  padding-right: 0.5rem;
  padding-left: 0.5rem;
  color: #818a91;
  content: "/";
}
nav.breadcrumbs.bootstrap .breadcrumb-item + .breadcrumb-item:hover::before {
  text-decoration: underline;
}
nav.breadcrumbs.bootstrap .breadcrumb-item + .breadcrumb-item:hover::before {
  text-decoration: none;
}
nav.breadcrumbs.bootstrap .breadcrumb-item-active {
  color: #818a91;
}

nav.breadcrumbs.bootstrap .breadcrumb a.breadcrumb-item:after {
  display: inline-block;
  padding-right: 0.5rem;
  padding-left: 0.5rem;
  content: "/";
  text-decoration: none;
}
nav.breadcrumbs.bootstrap .breadcrumb .icon:after {
  display: inline-block;
  padding-right: 0.5rem;
  padding-left: 0.5rem;
  color: #818a91;
  content: "/";
}
nav.breadcrumbs.bootstrap .breadcrumb .icon {
  display: inline-block;
}
nav.breadcrumbs.bootstrap .breadcrumb .icon svg {
  height: 0.7rem;
  width: 0.7rem;
}
</style>


        <div id='container'>
          <h3 id="camera-matrix">Camera matrix</h3>
<p>The camera or projection matrix is a $3\times 4$ matrix, $\mathbf{C}$, that describes an ideal pinhole camera (i.e., the aperture is a point and no lenses focus light). It maps 3D points from the world (world coordinates / space) to 2D points on an image (image coordinates / space). Given two points, <script type="math/tex">\mathbf{Q}</script> and <script type="math/tex">\mathbf{P}</script> representing homogenous points in image and world space, respectively, we can write their relationship as</p>

<script type="math/tex; mode=display">\mathbf{Q} \sim \mathbf{C}\mathbf{P}</script>

<p>where $\sim$ indicates equality up to a non-zero scalar multiplication. Wikipedia provides the following geometry:</p>

<p><img src="pinhole-3d-geometry.svg" alt="pinhole-3d-geometry.svg" /></p>

<ul>
  <li>A 3D orthogonal coordinate system with its origin at $\mathbf{O}$. This is also where the camera aperture is located. The three axes of the coordinate system are referred to as $X1$, $X2$, $X3$. Axis $X3$ is pointing in the viewing direction of the camera and is referred to as the <em>optical axis</em>, <em>principal axis</em>, or <em>principal ray</em>. The 3D plane which intersects with axes $X1$ and $X2$ is the front side of the camera, or <em>principal plane</em>.</li>
  <li>An image plane where the 3D world is projected through the aperture of the camera. The image plane is parallel to axes $X1$ and $X2$ and is located at distance $f$ from the origin $\mathbf{O}$ in the negative direction of the $X3$ axis. A practical implementation of a pinhole camera implies that the image plane is located such that it intersects the $X3$ axis at coordinate $-f$ where $f &gt; 0$. $f$ is also referred to as the focal length of the pinhole camera.</li>
  <li>A point $\mathbf{R}$ at the intersection of the optical axis and the image plane. This point is referred to as the <em>principal point</em> or <em>image center</em>.</li>
  <li>A point $\mathbf{P}$ somewhere in the world at coordinate  <script type="math/tex">(x_1, x_2, x_3)</script>  relative to the axes $X1$, $X2$, $X3$.</li>
  <li>The projection line of point $\mathbf{P}$ into the camera. This is the green line which passes through point $\mathbf{P}$ and the point $\mathbf{O}$.</li>
  <li>The projection of point $\mathbf{P}$ onto the image plane, denoted $\mathbf{Q}$. This point is given by the intersection of the projection line (green) and the image plane. In any practical situation we can assume that $x_3 &gt; 0$ which means that the intersection point is well defined.</li>
  <li>There is also a 2D coordinate system in the image plane, with origin at $\mathbf{R}$ and with axes $Y1$ and $Y2$ which are parallel to $X1$ and $X2$, respectively. The coordinates of point $\mathbf{Q}$ relative to this coordinate system is $(y_1, y_2)$.</li>
</ul>

<p>We want to relate $\mathbf{P}$ in world coordinates, <script type="math/tex">(x_1, x_2, x_3)</script> to $\mathbf{Q}$ in image coordinates, <script type="math/tex">(y_1, y_2)</script>. We can do so by examining the above figure from the $X2$ and $X1$ axes. From the $X2$ axis:</p>

<p><img src="pinhole-2d-geometry.svg" alt="pinhole-2d-geometry.svg" /></p>

<p>Using similar triangles, we note that</p>

<script type="math/tex; mode=display">-\frac{y_1}{f} = \frac{x_1}{x_3}</script>

<p>and, looking from positive $X1$,</p>

<script type="math/tex; mode=display">-\frac{y_2}{f} = \frac{x_2}{x_3}</script>

<p>so we have</p>

<script type="math/tex; mode=display">\left(\begin{array}{c}
  y_1 \\
  y_2
  \end{array}\right)

  =

  -\frac{f}{x_3}\left(\begin{array}{c}
  x_1 \\
  x_2
  \end{array}\right)</script>

<p>Because the image projected onto the image plane is rotated by 180ยบ, we can rewrite the above as below to right the image:</p>

<script type="math/tex; mode=display">\left(\begin{array}{c}
  y_1 \\
  y_2
  \end{array}\right)

  =

  \frac{f}{x_3}\left(\begin{array}{c}
  x_1 \\
  x_2
  \end{array}\right)</script>

<p>The camera matrix describes this transformation. However, the camera matrix operates on homogenous coordinates because we want to be able to represent more complex transformations (e.g., affine transformations). Rewriting the relationship betweej $\mathbf{P}$ and $\mathbf{Q}$ as homogenous coordinates:</p>

<script type="math/tex; mode=display">\left(
  \begin{array}{c}
    y_1 \\
    y_2 \\
    1
  \end{array}
\right)

=

\frac{f}{x_3}
\left(
  \begin{array}{c}
    x_1 \\
    x_2 \\
    \frac{x_3}{f}
  \end{array}
\right)

\sim

\left(
  \begin{array}{c}
    x_1 \\
    x_2 \\
    \frac{x_3}{f}
  \end{array}
\right)</script>

<p>We can rewrite this transformation as</p>

<script type="math/tex; mode=display">% <![CDATA[
\left(
  \begin{array}{c}
    y_1 \\
    y_2 \\
    1
  \end{array}
\right)

\sim

\left(
  \begin{array}{cccc}
    1 & 0 & 0 & 0 \\
    0 & 1 & 0 & 0 \\
    0 & 0 & \frac{1}{f} & 0 \\
  \end{array}
\right)
\left(
  \begin{array}{c}
    x_1 \\
    x_2 \\
    x_3 \\
    1
  \end{array}
\right) %]]></script>

<p>The $3\times 4$ matrix is $\mathbf{C}$. We can further simplify $\mathbf{C}$ by multiplying it by $f$. $\mathbf{C}$ is relatively simple because we have chosen our 2D and 3D coordinate systems in a particular way (i.e., no rotation, aligned origins, same scale).</p>

<h4 id="camera-calibration">Camera calibration</h4>

<h4 id="references">References</h4>
<ul>
  <li><a href="http://en.wikipedia.org/wiki/Camera_matrix">Camera matrix</a>.</li>
  <li><a href="http://www.ics.uci.edu/~majumder/vispercep/cameracalib.pdf">Camera calibration</a></li>
  <li><a href="http://ksimek.github.io/2012/08/14/decompose/">Decomposing the camera matrix</a></li>
  <li><a href="http://ksimek.github.io/2012/08/22/extrinsic/">Extrinsic camera matrix</a></li>
  <li><a href="http://ksimek.github.io/2013/08/13/intrinsic/">Intrinsic camera matrix</a></li>
</ul>

        </div>

      </section>

      <footer>
  <!-- <img src='/assets/img/bronze-22BC.png' class='nand'> -->
  <!-- <br> -->
  <!--email_off-->
    <small>Complain <a href="mailto:dsuo@cs.princeton.edu" target="_blank">here</a>.</small>
  <!--/email_off-->
  <small><a href="/pubkey.txt" target="_blank">Securely</a>.</small>

  <br>

  <social>
  <ul>
    <li><a href="mailto:dsuo@cs.princeton.edu" target="_blank"><i class="fa fa-envelope fa"></i></a></li>
    <!--/email_off-->
    <li><a href="https://github.com/danielsuo" target="_blank"><i class="fa fa-github fa"></i></a></li> 
    <li><a href="http://www.linkedin.com/in/danielsuo" target="_blank"><i class="fa fa-linkedin fa"></i></a></li>
    <li><a href="http://twitter.com/danielsuo" target="_blank"><i class="fa fa-twitter fa"></i></a></li>
    <li><a href="/feed.xml" target="_blank"><i class="fa fa-rss fa"></i></a></li> 
  </ul>
  </social>
</footer>


    </div>

    <script src='/assets/js/scale.fix.js'></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37351701-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
