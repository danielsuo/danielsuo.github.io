#!/usr/bin/env bash

notebooks=()
while IFS=  read -r -d $'\0'; do
    notebooks+=("$REPLY")
    echo $REPLY
done < <(find notes -name *.ipynb -print0)

for notebook in "${notebooks[@]}"; do
  filename=${notebook%.ipynb}
  echo $filename

  jupyter nbconvert --to markdown "$notebook"
  cat ./_includes/notes.md "$filename.md" > "$filename.tmp"
  mv "$filename.tmp" "$filename.md"
done
